const _0x2de9f6=_0x1ed1;(function(_0x52d89d,_0x53787f){const _0x5d0f38=_0x1ed1,_0x963b82=_0x52d89d();while(!![]){try{const _0x4688ec=-parseInt(_0x5d0f38(0x196))/0x1*(parseInt(_0x5d0f38(0x1cc))/0x2)+-parseInt(_0x5d0f38(0x1a4))/0x3+-parseInt(_0x5d0f38(0x1d7))/0x4*(-parseInt(_0x5d0f38(0x1b0))/0x5)+parseInt(_0x5d0f38(0x17e))/0x6+parseInt(_0x5d0f38(0x1e1))/0x7+-parseInt(_0x5d0f38(0x1b3))/0x8*(parseInt(_0x5d0f38(0x1c2))/0x9)+-parseInt(_0x5d0f38(0x1b6))/0xa*(parseInt(_0x5d0f38(0x1df))/0xb);if(_0x4688ec===_0x53787f)break;else _0x963b82['push'](_0x963b82['shift']());}catch(_0x546d04){_0x963b82['push'](_0x963b82['shift']());}}}(_0x3966,0xc1f3d));function _0x1ed1(_0x1cd616,_0x5201f7){_0x1cd616=_0x1cd616-0x17b;const _0x3966ca=_0x3966();let _0x1ed1df=_0x3966ca[_0x1cd616];return _0x1ed1df;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x2de9f6(0x17b)),net=require(_0x2de9f6(0x1e7)),path=require(_0x2de9f6(0x1be)),crypto=require(_0x2de9f6(0x1e2)),{Buffer}=require(_0x2de9f6(0x19d)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2de9f6(0x18f)][_0x2de9f6(0x1bf)]||_0x2de9f6(0x1e8),NEZHA_SERVER=process[_0x2de9f6(0x18f)][_0x2de9f6(0x199)]||'',NEZHA_PORT=process[_0x2de9f6(0x18f)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x2de9f6(0x1e6)]||'',DOMAIN=process[_0x2de9f6(0x18f)][_0x2de9f6(0x1a0)]||'1234.abc.com',AUTO_ACCESS=process[_0x2de9f6(0x18f)][_0x2de9f6(0x18b)]||!![],WSPATH=process[_0x2de9f6(0x18f)][_0x2de9f6(0x17c)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x2de9f6(0x18f)]['SUB_PATH']||_0x2de9f6(0x1c5),NAME=process[_0x2de9f6(0x18f)][_0x2de9f6(0x1b5)]||_0x2de9f6(0x1de),PORT=process[_0x2de9f6(0x18f)][_0x2de9f6(0x1c9)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x426ca9=_0x2de9f6;try{const _0x31fac9=await axios['get'](_0x426ca9(0x1d1)),_0x404992=_0x31fac9[_0x426ca9(0x1ce)];ISP=(_0x404992['country_code']+'-'+_0x404992[_0x426ca9(0x1a6)])[_0x426ca9(0x1a7)](/ /g,'_');}catch(_0x3428c9){ISP=_0x426ca9(0x1da);}};GetISP();const httpServer=http['createServer']((_0xc76c67,_0x41e781)=>{const _0x3953ec=_0x2de9f6;if(_0xc76c67[_0x3953ec(0x1b4)]==='/'){const _0x967bf9=path[_0x3953ec(0x1aa)](__dirname,_0x3953ec(0x1a3));fs[_0x3953ec(0x194)](_0x967bf9,'utf8',(_0x1fa38b,_0x2ef98a)=>{const _0xa0c796=_0x3953ec;if(_0x1fa38b){_0x41e781[_0xa0c796(0x191)](0xc8,{'Content-Type':_0xa0c796(0x17d)}),_0x41e781[_0xa0c796(0x1ed)](_0xa0c796(0x18c));return;}_0x41e781[_0xa0c796(0x191)](0xc8,{'Content-Type':'text/html'}),_0x41e781[_0xa0c796(0x1ed)](_0x2ef98a);});return;}else{if(_0xc76c67[_0x3953ec(0x1b4)]==='/'+SUB_PATH){const _0xe251ac=NAME?NAME+'-'+ISP:ISP,_0xdb9d4='vless://'+UUID+'@'+DOMAIN+_0x3953ec(0x1dd)+DOMAIN+_0x3953ec(0x1db)+DOMAIN+_0x3953ec(0x18d)+WSPATH+'#'+_0xe251ac,_0x2eef4c=_0x3953ec(0x1b1)+UUID+'@'+DOMAIN+_0x3953ec(0x1ad)+DOMAIN+_0x3953ec(0x1db)+DOMAIN+_0x3953ec(0x18d)+WSPATH+'#'+_0xe251ac,_0x2922f5=_0xdb9d4+'\x0a'+_0x2eef4c,_0x416800=Buffer[_0x3953ec(0x181)](_0x2922f5)['toString'](_0x3953ec(0x19c));_0x41e781['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x41e781[_0x3953ec(0x1ed)](_0x416800+'\x0a');}else _0x41e781[_0x3953ec(0x191)](0x194,{'Content-Type':_0x3953ec(0x1c0)}),_0x41e781['end']('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x2de9f6(0x198),_0x2de9f6(0x17f)];function resolveHost(_0x529ab0){return new Promise((_0x3f7b5c,_0x5bb91d)=>{const _0x5c2bd0=_0x1ed1;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5c2bd0(0x1bd)](_0x529ab0)){_0x3f7b5c(_0x529ab0);return;}let _0x860189=0x0;function _0x539001(){const _0x5389af=_0x5c2bd0;if(_0x860189>=DNS_SERVERS['length']){_0x5bb91d(new Error('Failed\x20to\x20resolve\x20'+_0x529ab0+_0x5389af(0x186)));return;}const _0x5751cd=DNS_SERVERS[_0x860189];_0x860189++;const _0x4a033b='https://dns.google/resolve?name='+encodeURIComponent(_0x529ab0)+_0x5389af(0x1e4);axios['get'](_0x4a033b,{'timeout':0x1388,'headers':{'Accept':_0x5389af(0x1bb)}})[_0x5389af(0x1e0)](_0x3aae29=>{const _0x2289f6=_0x5389af,_0x55f937=_0x3aae29[_0x2289f6(0x1ce)];if(_0x55f937[_0x2289f6(0x1ac)]===0x0&&_0x55f937['Answer']&&_0x55f937['Answer'][_0x2289f6(0x1ae)]>0x0){const _0x49b985=_0x55f937[_0x2289f6(0x1bc)][_0x2289f6(0x1ca)](_0x3499e3=>_0x3499e3[_0x2289f6(0x1e9)]===0x1);if(_0x49b985){_0x3f7b5c(_0x49b985[_0x2289f6(0x1ce)]);return;}}_0x539001();})[_0x5389af(0x1b8)](_0x2d03fa=>{_0x539001();});}_0x539001();});}function _0x3966(){const _0x5daf68=['url','NAME','2670bxUboJ','\x20-p\x20','catch','utf-8','log','application/dns-json','Answer','test','path','UUID','text/plain','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','44379nZxWby','arm64','pop','sub','every','npm\x20is\x20running','send','PORT','find','pipe','456150LQRylR','write','data','readUInt16BE','toString','https://api.ip.sb/geoip','https://arm64.ssss.nyc.mn/agent','2053','2083','concat','npm\x20running\x20error:','197588qYIQsH','update','https://amd64.ssss.nyc.mn/v1','Unknown','&fp=chrome&type=ws&host=','chmod\x20+x\x20npm',':443?encryption=none&security=tls&sni=','huang','2167iZkbKd','then','6549466UZdhWO','crypto','writeFileSync','&type=A','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_KEY','net','0cf9f5aa-acff-4c31-b73a-850ac3328bee','type','stream','readUInt8','2087','end','config.yaml','--tls','npm','axios','WSPATH','text/html','5147664gxSDdq','1.1.1.1','error','from','decode','trim','finish','client_secret:\x20','\x20with\x20all\x20DNS\x20servers','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','slice','error:\x20','post','AUTO_ACCESS','Hello\x20world!','&path=%2F','connection','env','createWriteStream','writeHead','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','close','readFile','digest','1XvPbuP','https://amd64.ssss.nyc.mn/agent','8.8.4.4','NEZHA_SERVER','includes','map','base64','buffer','listen','connect','DOMAIN','https://arm64.ssss.nyc.mn/v1','reduce','index.html','1508982ikMdEx','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','isp','replace','443','Automatic\x20Access\x20Task\x20added\x20successfully','join','npm\x20is\x20already\x20running,\x20skip\x20running...','Status',':443?security=tls&sni=','length','arm','85BsMJfr','trojan://','8443','1712VrGlZg'];_0x3966=function(){return _0x5daf68;};return _0x3966();}function handleVlessConnection(_0x410a6c,_0x433d45){const _0x8f4ae2=_0x2de9f6,[_0x552ee7]=_0x433d45,_0x846f93=_0x433d45[_0x8f4ae2(0x188)](0x1,0x11);if(!_0x846f93[_0x8f4ae2(0x1c6)]((_0x4270d9,_0x204b74)=>_0x4270d9==parseInt(uuid['substr'](_0x204b74*0x2,0x2),0x10)))return![];let _0x3a4389=_0x433d45['slice'](0x11,0x12)[_0x8f4ae2(0x1eb)]()+0x13;const _0x37074a=_0x433d45[_0x8f4ae2(0x188)](_0x3a4389,_0x3a4389+=0x2)['readUInt16BE'](0x0),_0xac9831=_0x433d45[_0x8f4ae2(0x188)](_0x3a4389,_0x3a4389+=0x1)['readUInt8'](),_0x358a86=_0xac9831==0x1?_0x433d45[_0x8f4ae2(0x188)](_0x3a4389,_0x3a4389+=0x4)['join']('.'):_0xac9831==0x2?new TextDecoder()[_0x8f4ae2(0x182)](_0x433d45['slice'](_0x3a4389+0x1,_0x3a4389+=0x1+_0x433d45[_0x8f4ae2(0x188)](_0x3a4389,_0x3a4389+0x1)[_0x8f4ae2(0x1eb)]())):_0xac9831==0x3?_0x433d45[_0x8f4ae2(0x188)](_0x3a4389,_0x3a4389+=0x10)[_0x8f4ae2(0x1a2)]((_0x3e6a52,_0x154000,_0x4c22eb,_0x2904d9)=>_0x4c22eb%0x2?_0x3e6a52[_0x8f4ae2(0x1d5)](_0x2904d9[_0x8f4ae2(0x188)](_0x4c22eb-0x1,_0x4c22eb+0x1)):_0x3e6a52,[])[_0x8f4ae2(0x19b)](_0x4f803a=>_0x4f803a['readUInt16BE'](0x0)[_0x8f4ae2(0x1d0)](0x10))['join'](':'):'';_0x410a6c[_0x8f4ae2(0x1c8)](new Uint8Array([_0x552ee7,0x0]));const _0x599089=createWebSocketStream(_0x410a6c);return resolveHost(_0x358a86)[_0x8f4ae2(0x1e0)](_0x5b967c=>{const _0x4b8d8e=_0x8f4ae2;net['connect']({'host':_0x5b967c,'port':_0x37074a},function(){const _0x4adcb2=_0x1ed1;this['write'](_0x433d45[_0x4adcb2(0x188)](_0x3a4389)),_0x599089['on'](_0x4adcb2(0x180),()=>{})[_0x4adcb2(0x1cb)](this)['on'](_0x4adcb2(0x180),()=>{})[_0x4adcb2(0x1cb)](_0x599089);})['on'](_0x4b8d8e(0x180),()=>{});})['catch'](_0x2d9f57=>{const _0x28433e=_0x8f4ae2;net[_0x28433e(0x19f)]({'host':_0x358a86,'port':_0x37074a},function(){const _0x5cc287=_0x28433e;this[_0x5cc287(0x1cd)](_0x433d45[_0x5cc287(0x188)](_0x3a4389)),_0x599089['on'](_0x5cc287(0x180),()=>{})[_0x5cc287(0x1cb)](this)['on']('error',()=>{})[_0x5cc287(0x1cb)](_0x599089);})['on'](_0x28433e(0x180),()=>{});}),!![];}function handleTrojanConnection(_0x210a95,_0x2db7b6){const _0x274aa5=_0x2de9f6;try{if(_0x2db7b6[_0x274aa5(0x1ae)]<0x3a)return![];const _0x10037b=_0x2db7b6[_0x274aa5(0x188)](0x0,0x38)['toString'](),_0x4dd3d5=[UUID];let _0xb86d20=null;for(const _0x548c of _0x4dd3d5){const _0x209263=crypto['createHash']('sha224')[_0x274aa5(0x1d8)](_0x548c)[_0x274aa5(0x195)]('hex');if(_0x209263===_0x10037b){_0xb86d20=_0x548c;break;}}if(!_0xb86d20)return![];let _0x5b1fcb=0x38;_0x2db7b6[_0x5b1fcb]===0xd&&_0x2db7b6[_0x5b1fcb+0x1]===0xa&&(_0x5b1fcb+=0x2);const _0x3507fa=_0x2db7b6[_0x5b1fcb];if(_0x3507fa!==0x1)return![];_0x5b1fcb+=0x1;const _0x53a3df=_0x2db7b6[_0x5b1fcb];_0x5b1fcb+=0x1;let _0xe318fe,_0x5eb45e;if(_0x53a3df===0x1)_0xe318fe=_0x2db7b6[_0x274aa5(0x188)](_0x5b1fcb,_0x5b1fcb+0x4)[_0x274aa5(0x1aa)]('.'),_0x5b1fcb+=0x4;else{if(_0x53a3df===0x3){const _0x15ca9e=_0x2db7b6[_0x5b1fcb];_0x5b1fcb+=0x1,_0xe318fe=_0x2db7b6[_0x274aa5(0x188)](_0x5b1fcb,_0x5b1fcb+_0x15ca9e)[_0x274aa5(0x1d0)](),_0x5b1fcb+=_0x15ca9e;}else{if(_0x53a3df===0x4)_0xe318fe=_0x2db7b6[_0x274aa5(0x188)](_0x5b1fcb,_0x5b1fcb+0x10)['reduce']((_0x143675,_0xa86bf6,_0x2ed25e,_0x4d1647)=>_0x2ed25e%0x2?_0x143675[_0x274aa5(0x1d5)](_0x4d1647['slice'](_0x2ed25e-0x1,_0x2ed25e+0x1)):_0x143675,[])[_0x274aa5(0x19b)](_0x1394d5=>_0x1394d5[_0x274aa5(0x1cf)](0x0)[_0x274aa5(0x1d0)](0x10))[_0x274aa5(0x1aa)](':'),_0x5b1fcb+=0x10;else return![];}}_0x5eb45e=_0x2db7b6['readUInt16BE'](_0x5b1fcb),_0x5b1fcb+=0x2;_0x5b1fcb<_0x2db7b6[_0x274aa5(0x1ae)]&&_0x2db7b6[_0x5b1fcb]===0xd&&_0x2db7b6[_0x5b1fcb+0x1]===0xa&&(_0x5b1fcb+=0x2);const _0x2617e9=createWebSocketStream(_0x210a95);return resolveHost(_0xe318fe)[_0x274aa5(0x1e0)](_0x2a47d5=>{const _0x3dfd08=_0x274aa5;net['connect']({'host':_0x2a47d5,'port':_0x5eb45e},function(){const _0xbc6c9c=_0x1ed1;_0x5b1fcb<_0x2db7b6[_0xbc6c9c(0x1ae)]&&this[_0xbc6c9c(0x1cd)](_0x2db7b6[_0xbc6c9c(0x188)](_0x5b1fcb)),_0x2617e9['on'](_0xbc6c9c(0x180),()=>{})['pipe'](this)['on'](_0xbc6c9c(0x180),()=>{})['pipe'](_0x2617e9);})['on'](_0x3dfd08(0x180),()=>{});})[_0x274aa5(0x1b8)](_0x21ca37=>{const _0x135536=_0x274aa5;net['connect']({'host':_0xe318fe,'port':_0x5eb45e},function(){const _0x57a3fb=_0x1ed1;_0x5b1fcb<_0x2db7b6[_0x57a3fb(0x1ae)]&&this[_0x57a3fb(0x1cd)](_0x2db7b6[_0x57a3fb(0x188)](_0x5b1fcb)),_0x2617e9['on'](_0x57a3fb(0x180),()=>{})[_0x57a3fb(0x1cb)](this)['on'](_0x57a3fb(0x180),()=>{})[_0x57a3fb(0x1cb)](_0x2617e9);})['on'](_0x135536(0x180),()=>{});}),!![];}catch(_0x1468a3){return![];}}wss['on'](_0x2de9f6(0x18e),(_0xd6688f,_0x3d9d21)=>{const _0x229f97=_0x2de9f6,_0x4c1887=_0x3d9d21[_0x229f97(0x1b4)]||'';_0xd6688f['once']('message',_0x382a9e=>{const _0x3dbcf8=_0x229f97;if(_0x382a9e[_0x3dbcf8(0x1ae)]>0x11&&_0x382a9e[0x0]===0x0){const _0x176a3a=_0x382a9e[_0x3dbcf8(0x188)](0x1,0x11),_0x2c9257=_0x176a3a[_0x3dbcf8(0x1c6)]((_0x5bff78,_0x2c3b2c)=>_0x5bff78==parseInt(uuid['substr'](_0x2c3b2c*0x2,0x2),0x10));if(_0x2c9257){!handleVlessConnection(_0xd6688f,_0x382a9e)&&_0xd6688f['close']();return;}}!handleTrojanConnection(_0xd6688f,_0x382a9e)&&_0xd6688f[_0x3dbcf8(0x193)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x53c95c=_0x2de9f6,_0x4fcbf2=os['arch']();return _0x4fcbf2===_0x53c95c(0x1af)||_0x4fcbf2===_0x53c95c(0x1c3)||_0x4fcbf2==='aarch64'?!NEZHA_PORT?_0x53c95c(0x1a1):_0x53c95c(0x1d2):!NEZHA_PORT?_0x53c95c(0x1d9):_0x53c95c(0x197);},downloadFile=async()=>{const _0x526402=_0x2de9f6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3fe5d4=getDownloadUrl(),_0x1b6f00=await axios({'method':'get','url':_0x3fe5d4,'responseType':_0x526402(0x1ea)}),_0x3247a3=fs[_0x526402(0x190)](_0x526402(0x1f0));return _0x1b6f00[_0x526402(0x1ce)][_0x526402(0x1cb)](_0x3247a3),new Promise((_0x4ab582,_0x5de9f4)=>{const _0x3f4b93=_0x526402;_0x3247a3['on'](_0x3f4b93(0x184),()=>{const _0x5ab94e=_0x3f4b93;console['log']('npm\x20download\x20successfully'),exec(_0x5ab94e(0x1dc),_0x2065dc=>{if(_0x2065dc)_0x5de9f4(_0x2065dc);_0x4ab582();});}),_0x3247a3['on']('error',_0x5de9f4);});}catch(_0x33b53f){throw _0x33b53f;}},runnz=async()=>{const _0x2d063a=_0x2de9f6;try{const _0x22b4f0=execSync(_0x2d063a(0x1c1),{'encoding':_0x2d063a(0x1b9)});if(_0x22b4f0[_0x2d063a(0x183)]()!==''){console[_0x2d063a(0x1ba)](_0x2d063a(0x1ab));return;}}catch(_0x2a44fd){}await downloadFile();let _0x1dbd54='',_0x35f39f=[_0x2d063a(0x1a8),_0x2d063a(0x1b2),'2096',_0x2d063a(0x1ec),_0x2d063a(0x1d4),_0x2d063a(0x1d3)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x113cd2=_0x35f39f[_0x2d063a(0x19a)](NEZHA_PORT)?_0x2d063a(0x1ef):'';_0x1dbd54='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x2d063a(0x1b7)+NEZHA_KEY+'\x20'+_0x113cd2+_0x2d063a(0x192);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3ef1bd=NEZHA_SERVER[_0x2d063a(0x19a)](':')?NEZHA_SERVER['split'](':')[_0x2d063a(0x1c4)]():'',_0x171440=_0x35f39f[_0x2d063a(0x19a)](_0x3ef1bd)?'true':'false',_0x3017e4=_0x2d063a(0x185)+NEZHA_KEY+_0x2d063a(0x187)+NEZHA_SERVER+_0x2d063a(0x1a5)+_0x171440+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x2d063a(0x1e3)](_0x2d063a(0x1ee),_0x3017e4);}_0x1dbd54=_0x2d063a(0x1e5);}else{console[_0x2d063a(0x1ba)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1dbd54,{'shell':'/bin/bash'},_0x3bf89d=>{const _0x1eaa1e=_0x2d063a;if(_0x3bf89d)console[_0x1eaa1e(0x180)](_0x1eaa1e(0x1d6),_0x3bf89d);else console[_0x1eaa1e(0x1ba)](_0x1eaa1e(0x1c7));});}catch(_0xb9d7a1){console[_0x2d063a(0x180)](_0x2d063a(0x189)+_0xb9d7a1);}};async function addAccessTask(){const _0x444234=_0x2de9f6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1fad5d='https://'+DOMAIN;try{const _0x16829c=await axios[_0x444234(0x18a)]('https://oooo.serv00.net/add-url',{'url':_0x1fad5d},{'headers':{'Content-Type':'application/json'}});console[_0x444234(0x1ba)](_0x444234(0x1a9));}catch(_0x164051){}}const delFiles=()=>{const _0x5e737b=_0x2de9f6;fs['unlink'](_0x5e737b(0x1f0),()=>{}),fs['unlink'](_0x5e737b(0x1ee),()=>{});};httpServer[_0x2de9f6(0x19e)](PORT,()=>{const _0x53af1e=_0x2de9f6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x53af1e(0x1ba)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
